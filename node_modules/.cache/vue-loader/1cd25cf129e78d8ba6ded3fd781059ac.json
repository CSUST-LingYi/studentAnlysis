{"remainingRequest":"D:\\HBuliderX_project\\studentAnlysis\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\HBuliderX_project\\studentAnlysis\\src\\pages\\Dashboard.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\HBuliderX_project\\studentAnlysis\\src\\pages\\Dashboard.vue","mtime":1584454979283},{"path":"D:\\HBuliderX_project\\studentAnlysis\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\HBuliderX_project\\studentAnlysis\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\HBuliderX_project\\studentAnlysis\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\HBuliderX_project\\studentAnlysis\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n// 引入 ECharts 主模块\n// var echarts = require('echarts/lib/echarts');\n// require('echarts/lib/chart/bar');\n// require('echarts/lib/chart/pie');\n\nexport default {\n\tname: \"dashboard\",\n\tdata() {\n\t\treturn {\n\t\t\tboardlist: [],\n\t\t\tactiveName: 'sexconunt',\n\t\t\ttea_activename: 'tea_grade_conunt',\n\t\t\tautomsgtitle: \"注意\",\n\t\t\tautomsg: \"该网站数据基于经管学院学生管理系统数据库!\\n,为非官方数据，仅作参考！\",\n\t\t\toptions: [{\n\t\t\t\tvalue: '0',\n\t\t\t\tlabel: '全学院'\n\t\t\t}],\n\t\t\tvalue: '',\n\t\t\tgradelist: ['全学院'],\n\t\t\tnationseries: [],\n\t\t\tgradeStuSeries: []\n\t\t}\n\t},\n\tmethods: {\n\t\tstuOverView(tab, event) {\n\t\t\t// console.log(tab, event);\n\n\t\t\tswitch (tab.name) {\n\t\t\t\tcase \"sexconunt\":\n\t\t\t\t\tthis.changeSexChart(0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"nationcount\":\n\t\t\t\t\tthis.drawNationChart();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"gradecount\":\n\t\t\t\t\tthis.drawGradeNumChart();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"politicalstatus\":\n\t\t\t\t\tthis.drawPoliticalStatusChart();\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\n\t\t\t// console.log(tab.name);\n\t\t},\n\t\tautoopen(title1, msg) {\n\t\t\tconst h = this.$createElement;\n\n\t\t\tthis.$notify({\n\t\t\t\ttitle: title1,\n\t\t\t\tmessage: h('i', {\n\t\t\t\t\tstyle: 'color: red'\n\t\t\t\t}, msg)\n\t\t\t});\n\t\t},\n\n\t\tchangeSexChart(year) {\n\t\t\t// console.log(year);\n\t\t\t//发送请求 \n\t\t\tthis.drawSexChart(year, this.bnum, this.gnum, 0);\n\t\t\tthis.$http.get(\"/overview/sexcount/grade/\" + year)\n\t\t\t\t.then(({\n\t\t\t\t\tdata\n\t\t\t\t}) => {\n\n\t\t\t\t\tthis.bnum = data.bnum;\n\t\t\t\t\tthis.gnum = data.gnum;\n\t\t\t\t\tif (year == '0') {\n\t\t\t\t\t\tyear = '全学院';\n\t\t\t\t\t}\n\t\t\t\t\tthis.drawSexChart(year, this.bnum, this.gnum, 1);\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.log(err);\n\t\t\t\t\tthis.autoopen('错误', '网络错误,访问超时！');\n\t\t\t\t});\n\n\t\t},\n\t\t//性别图表\n\t\t/*\n\t\t\ttitle1:String 标题开头\n\t\t\tbnum:Number 男生人数\n\t\t\tgnum:Number 女生人数\n\t\t\tloading:Boolean 加载动画开关\n\t\t*/\n\t\tdrawSexChart(title1, bnum, gnum, loading) {\n\n\n\t\t\tlet myChart = this.$echarts.init(document.getElementById(\"sexchart\"));\n\n\t\t\t// 指定图表的配置项和数据\n\t\t\tlet option = {\n\t\t\t\ttooltip: {\n\t\t\t\t\ttrigger: 'item',\n\t\t\t\t\tformatter: '{a} <br/>{b}: {c} ({d}%)'\n\t\t\t\t},\n\t\t\t\ttitle: {\n\t\t\t\t\ttext: title1 + '级性别比例',\n\t\t\t\t\tx: 'center'\n\t\t\t\t},\n\t\t\t\tlegend: {\n\t\t\t\t\torient: 'vertical',\n\t\t\t\t\tleft: 10,\n\t\t\t\t\tdata: ['男', '女']\n\t\t\t\t},\n\t\t\t\tseries: [{\n\t\t\t\t\tname: title1 + '级性别比例',\n\t\t\t\t\ttype: 'pie',\n\t\t\t\t\tradius: ['50%', '70%'],\n\t\t\t\t\tavoidLabelOverlap: false,\n\t\t\t\t\tlabel: {\n\t\t\t\t\t\tnormal: {\n\t\t\t\t\t\t\tshow: false,\n\t\t\t\t\t\t\tposition: 'center'\n\t\t\t\t\t\t},\n\t\t\t\t\t\temphasis: {\n\t\t\t\t\t\t\tshow: true,\n\t\t\t\t\t\t\ttextStyle: {\n\t\t\t\t\t\t\t\tfontSize: '30',\n\t\t\t\t\t\t\t\tfontWeight: 'bold'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tlabelLine: {\n\t\t\t\t\t\tnormal: {\n\t\t\t\t\t\t\tshow: false\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdata: [{\n\t\t\t\t\t\t\tvalue: bnum,\n\t\t\t\t\t\t\tname: '男'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue: gnum,\n\t\t\t\t\t\t\tname: '女'\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}]\n\t\t\t};\n\t\t\t// 使用刚指定的配置项和数据显示图表。\n\t\t\tmyChart.setOption(option);\n\n\t\t\tmyChart.showLoading();\n\n\t\t\tif (loading) {\n\t\t\t\tmyChart.hideLoading();\n\t\t\t}\n\n\t\t},\n\n\t\t/**\n\t\t *\t民族图表\n\t\t */\n\t\tdrawNationChart() {\n\t\t\tlet myChart = this.$echarts.init(document.getElementById(\"nationchart\"));\n\t\t\tmyChart.showLoading();\n\t\t\tthis.$http.get(\"overview/nation\")\n\t\t\t\t.then(({\n\t\t\t\t\tdata\n\t\t\t\t}) => {\n\t\t\t\t\tthis.nationseries = [];\n\t\t\t\t\tlet glists = Object.keys(data);\n\t\t\t\t\t// console.log(glists);\n\t\t\t\t\tfor (let i = 0; i < glists.length; i++) {\n\t\t\t\t\t\tlet resdata = [];\n\t\t\t\t\t\tlet nationname = Object.keys(data[glists[i]]);\n\t\t\t\t\t\tnationname.map(nname => {\n\t\t\t\t\t\t\tresdata.push({\n\t\t\t\t\t\t\t\tname: nname,\n\t\t\t\t\t\t\t\tvalue: data[glists[i]][nname]\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\t\t\t\t\t\t// console.log(resdata);\n\t\t\t\t\t\tthis.nationseries.push({\n\t\t\t\t\t\t\tname: (glists[i] == '0' ? '全学院' : glists[i]),\n\t\t\t\t\t\t\ttype: 'treemap',\n\t\t\t\t\t\t\tbreadcrumb: {\n\t\t\t\t\t\t\t\tshow: false\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tdata: resdata\n\t\t\t\t\t\t})\n\n\t\t\t\t\t}\n\t\t\t\t\tlet option = {\n\t\t\t\t\t\ttooltip: {},\n\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\ttop: 5,\n\t\t\t\t\t\t\tleft: 'center',\n\t\t\t\t\t\t\ttext: '民族分布',\n\t\t\t\t\t\t\tborderRadius: [5, 5, 0, 0]\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\tdata: this.gradelist,\n\t\t\t\t\t\t\tselectedMode: 'single',\n\t\t\t\t\t\t\tbottom: 0,\n\t\t\t\t\t\t\titemGap: 2\n\t\t\t\t\t\t},\n\t\t\t\t\t\tseries: this.nationseries\n\t\t\t\t\t};\n\t\t\t\t\tmyChart.hideLoading();\n\t\t\t\t\tmyChart.setOption(option);\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.log(err);\n\t\t\t\t\tthis.autoopen('错误', '网络错误,访问超时！');\n\t\t\t\t})\n\t\t},\n\n\t\t/**\n\t\t * 年级人数统计图表\n\t\t */\n\t\tdrawGradeNumChart() {\n\t\t\tlet gradedata = [];\n\t\t\tlet myChart = this.$echarts.init(document.getElementById(\"gradecountchart\"));\n\t\t\tmyChart.showLoading();\n\t\t\tthis.$http.get(\"overview/grades\")\n\t\t\t\t.then(({\n\t\t\t\t\tdata\n\t\t\t\t}) => {\n\t\t\t\t\tfor (let i = 0; i < Object.keys(data).length; i++) {\n\t\t\t\t\t\tgradedata.push({\n\t\t\t\t\t\t\tname: Object.keys(data)[i],\n\t\t\t\t\t\t\tvalue: Object.values(data)[i]\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\tlet option = {\n\n\t\t\t\t\t\ttooltip: {\n\t\t\t\t\t\t\ttrigger: 'item',\n\t\t\t\t\t\t\tformatter: '{a} <br/>{b} : {c} ({d}%)'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tvisualMap: {\n\t\t\t\t\t\t\tshow: false,\n\t\t\t\t\t\t\tmin: 700,\n\t\t\t\t\t\t\tmax: 900,\n\t\t\t\t\t\t\tinRange: {\n\t\t\t\t\t\t\t\tcolorLightness: [0, 1]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tseries: [{\n\t\t\t\t\t\t\tname: '年级人数统计',\n\t\t\t\t\t\t\ttype: 'pie',\n\t\t\t\t\t\t\tradius: '70%',\n\t\t\t\t\t\t\tcenter: ['50%', '50%'],\n\t\t\t\t\t\t\tdata: gradedata.sort(function(a, b) {\n\t\t\t\t\t\t\t\treturn a.value - b.value;\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\troseType: 'radius',\n\n\t\t\t\t\t\t}]\n\t\t\t\t\t};\n\t\t\t\t\tmyChart.hideLoading();\n\t\t\t\t\tmyChart.setOption(option);\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.log(err);\n\t\t\t\t\tthis.autoopen('错误', '网络错误,访问超时！');\n\t\t\t\t})\n\t\t},\n\t\t/**\n\t\t * 政治面貌统计\n\t\t */\n\t\tdrawPoliticalStatusChart() {\n\n\t\t\tlet myChart = this.$echarts.init(document.getElementById(\"politicalstatuschart\"));\n\t\t\tmyChart.showLoading();\n\t\t\tthis.$http.get(\"overview/ps\")\n\t\t\t\t.then(({\n\t\t\t\t\tdata\n\t\t\t\t}) => {\n\t\t\t\t\tlet psseries = []; //初始化图表列表\n\t\t\t\t\tlet datalist = {}; //初始化图表数据\n\t\t\t\t\tlet map = {};\n\t\t\t\t\tlet dest = [];\n\t\t\t\t\t//根据termYear,psname排序\n\t\t\t\t\tlet sortdata = data.sort(this.$sortByArr([\"termYear\", \"psname\"]));\n\t\t\t\t\t//根据termYear将json分组\n\t\t\t\t\tsortdata.forEach(i => {\n\t\t\t\t\t\tif (i.termYear == null) i.termYear = '全学院';\n\t\t\t\t\t\tif (!map[i.psname]) {\n\t\t\t\t\t\t\tdest.push({\n\t\t\t\t\t\t\t\tpsname: i.psname,\n\t\t\t\t\t\t\t\tcontent: [i]\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tmap[i.psname] = \"existed\";\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdest.forEach(j => {\n\t\t\t\t\t\t\t\tif (j.psname == i.psname) {\n\t\t\t\t\t\t\t\t\tj.content.push(i);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t// console.log(map);\n\n\n\t\t\t\t\t// console.log(datalist);\n\t\t\t\t\t// console.log(dest);\n\n\t\t\t\t\tdest.forEach(d => {\n\t\t\t\t\t\t//初始化数据集合\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\tthis.gradelist.forEach(g => datalist[g] = 0);\n\n\t\t\t\t\t\td['content'].forEach(c => {\n\t\t\t\t\t\t\tdatalist[c.termYear] = (c.counts);\n\t\t\t\t\t\t})\n\t\t\t\t\t\tpsseries.push({\n\t\t\t\t\t\t\tname: d.psname,\n\t\t\t\t\t\t\ttype: 'bar',\n\t\t\t\t\t\t\tstack: '总量',\n\t\t\t\t\t\t\tlabel: {\n\t\t\t\t\t\t\t\tshow: false,\n\t\t\t\t\t\t\t\tposition: 'insideRight'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tdata: Object.values(datalist)\n\t\t\t\t\t\t})\n\n\t\t\t\t\t})\n\t\t\t\t\tlet option = {\n\t\t\t\t\t\ttooltip: {\n\t\t\t\t\t\t\ttrigger: 'axis',\n\t\t\t\t\t\t\taxisPointer: {\n\t\t\t\t\t\t\t\ttype: 'shadow'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\tdata: ['党员', '共青团员', '积极分子', '群众', '预备党员']\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgrid: {\n\t\t\t\t\t\t\tleft: '3%',\n\t\t\t\t\t\t\tright: '4%',\n\t\t\t\t\t\t\tbottom: '3%',\n\t\t\t\t\t\t\tcontainLabel: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\txAxis: {\n\t\t\t\t\t\t\ttype: 'value'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tyAxis: {\n\t\t\t\t\t\t\ttype: 'category',\n\t\t\t\t\t\t\tdata: Object.keys(datalist)\n\t\t\t\t\t\t},\n\t\t\t\t\t\tseries: psseries\n\t\t\t\t\t};\n\t\t\t\t\tmyChart.hideLoading();\n\t\t\t\t\tmyChart.setOption(option);\n\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.log(err);\n\t\t\t\t\tthis.autoopen('错误', '网络错误,访问超时！');\n\t\t\t\t});\n\n\t\t},\n\n\t\t/**\n\t\t * 教师年级分布  //TODO 无数据，静态数据演示图\n\t\t */\n\t\tdrawTeacherGradeChart() {\n\t\t\tlet myChart = this.$echarts.init(document.getElementById(\"tea_grade_chart\"));\n\t\t\tlet option = {\n\t\t\t\ttooltip: {\n\t\t\t\t\ttrigger: 'item',\n\t\t\t\t\tformatter: '{a} <br/>{b} : {c} ({d}%)'\n\t\t\t\t},\n\t\t\t\ttitle: {\n\t\t\t\t\ttext: \"在库教师数量(数据库暂无教师数据，下图为演示数据)\",\n\t\t\t\t\tleft: \"center\"\n\t\t\t\t},\n\t\t\t\tlegend: {\n\t\t\t\t\ttype: 'scroll',\n\t\t\t\t\torient: 'vertical',\n\t\t\t\t\tright: 10,\n\t\t\t\t\ttop: 20,\n\t\t\t\t\tbottom: 20,\n\t\t\t\t\tdata: ['2014', '2015', '2016', '2017', '2018']\n\t\t\t\t},\n\t\t\t\tseries: [{\n\t\t\t\t\tname: '在校教师数量(暂无数据，图为演示数据)',\n\t\t\t\t\ttype: 'pie',\n\t\t\t\t\tradius: '70%',\n\t\t\t\t\tcenter: ['40%', '50%'],\n\t\t\t\t\tdata: [{\n\t\t\t\t\t\t\tvalue: 30,\n\t\t\t\t\t\t\tname: '2014'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue: 40,\n\t\t\t\t\t\t\tname: '2015'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue: 50,\n\t\t\t\t\t\t\tname: '2016'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue: 60,\n\t\t\t\t\t\t\tname: '2017'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue: 70,\n\t\t\t\t\t\t\tname: '2018'\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\temphasis: {\n\t\t\t\t\t\titemStyle: {\n\t\t\t\t\t\t\tshadowBlur: 10,\n\t\t\t\t\t\t\tshadowOffsetX: 0,\n\t\t\t\t\t\t\tshadowColor: 'rgba(0, 0, 0, 0.5)'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t};\n\t\t\tmyChart.setOption(option);\n\t\t},\n\n\t\t/**\n\t\t * \t生源地图\n\t\t */\n\t\tdramStuMap() {\n\t\t\tlet myChart = this.$echarts.init(document.getElementById(\"stuMap\"));\n\t\t\tmyChart.showLoading();\n\t\t\tthis.$http.get(\"overview/stumap\")\n\t\t\t\t.then(({\n\t\t\t\t\tdata\n\t\t\t\t}) => {\n\t\t\t\t\tlet addrData = this.$evil(data);\n\n\t\t\t\t\tlet option = {\n\t\t\t\t\t\ttooltip: {\n\t\t\t\t\t\t\ttrigger: 'item'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlegend: {\n\t\t\t\t\t\t\torient: 'vertical',\n\t\t\t\t\t\t\tleft: 'left',\n\t\t\t\t\t\t\tdata: ['全学院']\n\t\t\t\t\t\t},\n\t\t\t\t\t\tvisualMap: {\n\t\t\t\t\t\t      // 左下角定义 在选中范围中的视觉元素 渐变地区颜色\n\t\t\t\t\t\t      type: 'piecewise', // 类型为分段型\n\t\t\t\t\t\t      top: \"bottom\",\n\t\t\t\t\t\t      right: 10,\n\t\t\t\t\t\t      splitNumber: 6,\n\t\t\t\t\t\t      seriesIndex: [0],\n\t\t\t\t\t\t      itemWidth: 20, // 每个图元的宽度\n\t\t\t\t\t\t      itemGap: 2,    // 每两个图元之间的间隔距离，单位为px\n\t\t\t\t\t\t      pieces: [      // 自定义每一段的范围，以及每一段的文字   \n\t\t\t\t\t\t        { gte: 1000, label: '1000以上人', color: '#c1484e' },\n\t\t\t\t\t\t        { gte: 500, lte: 999, label: '500-999人', color: '#cb625f' },\n\t\t\t\t\t\t        { gte: 100, lte: 499, label: '100-499人', color: '#d57b6e' },\n\t\t\t\t\t\t        { gte: 10, lte: 99, label: '10-99人', color: '#df9a7e' },\n\t\t\t\t\t\t        { lte: 9, label: '1-9人', color: '#f5eda5' }          // 不指定 min，表示 min 为无限大（-Infinity）。\n\t\t\t\t\t\t      ],\n\t\t\t\t\t\t      textStyle: {\n\t\t\t\t\t\t        color: '#737373'\n\t\t\t\t\t\t      }\n\t\t\t\t\t\t    },\n\t\t\t\t\t\ttoolbox: {\n\t\t\t\t\t\t\tshow: true,\n\t\t\t\t\t\t\torient: 'vertical',\n\t\t\t\t\t\t\tleft: 'right',\n\t\t\t\t\t\t\ttop: 'center',\n\t\t\t\t\t\t\tfeature: {\n\t\t\t\t\t\t\t\tmark: {\n\t\t\t\t\t\t\t\t\tshow: true\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tdataView: {\n\t\t\t\t\t\t\t\t\tshow: true,\n\t\t\t\t\t\t\t\t\treadOnly: false\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\trestore: {\n\t\t\t\t\t\t\t\t\tshow: true\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tsaveAsImage: {\n\t\t\t\t\t\t\t\t\tshow: true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tseries: [{\n\t\t\t\t\t\t\tname: '全学院',\n\t\t\t\t\t\t\ttype: 'map',\n\t\t\t\t\t\t\tmapType: 'china',\n\t\t\t\t\t\t\troam: false,\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tzoom: 1.2,\n\t\t\t\t\t\t\tlabel: {\n\t\t\t\t\t\t\t\tnormal: {\n\t\t\t\t\t\t\t\t\tshow: true\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\temphasis: {\n\t\t\t\t\t\t\t\t\tshow: false\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tdata: addrData\n\t\t\t\t\t\t}]\n\t\t\t\t\t};\n\t\t\t\t\tmyChart.hideLoading();\n\t\t\t\t\tmyChart.setOption(option);\n\t\t\t\t})\n\n\t\t}\n\t},\n\tmounted() {\n\n\t\t//提示信息\n\t\tthis.autoopen(this.automsgtitle, this.automsg);\n\t\t//数据面板显示\n\t\tthis.$http.get(\"/overview/showBoard\")\n\t\t\t.then(({\n\t\t\t\tdata\n\t\t\t}) => {\n\t\t\t\tthis.boardlist = data;\n\t\t\t\tconsole.log(this.boardlist);\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log(err);\n\t\t\t\tthis.autoopen('错误', '网络错误,访问超时！');\n\t\t\t});\n\t\t//性别图表显示\n\t\tthis.changeSexChart('0');\n\t\t//获取年级列表\n\t\tthis.$http.get(\"/overview/listGrades\")\n\t\t\t.then(({\n\t\t\t\tdata\n\t\t\t}) => {\n\t\t\t\tthis.gradelist.push.apply(this.gradelist, data);\n\t\t\t\tdata.map(grade => {\n\t\t\t\t\tthis.options.push({\n\t\t\t\t\t\t'value': grade,\n\t\t\t\t\t\t'label': grade\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log(err);\n\t\t\t\tthis.autoopen('错误', '网络错误,访问超时！');\n\t\t\t});\n\n\t\t//教师分布图\n\t\tthis.drawTeacherGradeChart();\n\t\t//生源地图\n\t\tthis.dramStuMap();\n\n\t}\n\n\n}\n",{"version":3,"sources":["Dashboard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuHA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;AAGA","file":"Dashboard.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n\t<div>\r\n\r\n\t\t<el-container>\r\n\t\t\t<el-main class=\"num\">\r\n\t\t\t\t<el-row :gutter=\"10\">\r\n\t\t\t\t\t<el-col :span=\"8\">\r\n\t\t\t\t\t\t<el-card shadow=\"hover\" style=\"background-color: #de2e2e;\">\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<p>{{boardlist[0]}}<span>人</span></p>\r\n\t\t\t\t\t\t\t\t<span>在库学生总人数</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</el-card>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"8\">\r\n\t\t\t\t\t\t<el-card shadow=\"hover\" style=\"background-color: #184794;\">\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<p>{{boardlist[1]}}<span>个</span></p>\r\n\t\t\t\t\t\t\t\t<span>在库本科生人数</span>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t</el-card>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"8\">\r\n\t\t\t\t\t\t<el-card shadow=\"hover\" style=\"background-color: #184794;\">\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<p>{{boardlist[2]}}<span>个</span></p>\r\n\t\t\t\t\t\t\t\t<span>在库研究生生人数</span>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t</el-card>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\t\t\t\t<br>\r\n\t\t\t\t<el-row :gutter=\"10\">\r\n\t\t\t\t\t<el-col :span=\"8\">\r\n\t\t\t\t\t\t<el-card shadow=\"hover\" style=\"background-color: orangered;\">\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<p>{{boardlist[3]}}<span>个</span></p>\r\n\t\t\t\t\t\t\t\t<span>在库专业种类数</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</el-card>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"8\">\r\n\t\t\t\t\t\t<el-card shadow=\"hover\" style=\"background-color: seagreen;\">\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<p>{{boardlist[4]}}<span>人</span></p>\r\n\t\t\t\t\t\t\t\t<span>在库学工办教师人数</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</el-card>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"8\">\r\n\t\t\t\t\t\t<el-card shadow=\"hover\" style=\"background-color: dimgrey;\">\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<p>{{boardlist[5]}}<span>个</span></p>\r\n\t\t\t\t\t\t\t\t<span>在库班级总数</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</el-card>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\t\t\t</el-main>\r\n\t\t</el-container>\r\n\t\t<el-container>\r\n\t\t\t<el-main class=\"chart1\">\r\n\t\t\t\t<el-tag type=\"info\" effect=\"dark\">学生概览</el-tag>\r\n\r\n\t\t\t\t<el-tabs v-model=\"activeName\" @tab-click=\"stuOverView\">\r\n\t\t\t\t\t<el-tab-pane label=\"性别统计\" name=\"sexconunt\">\r\n\t\t\t\t\t\t<el-select v-model=\"value\" size=\"mini\" placeholder=\"请选择年级\" @change=\"changeSexChart\">\r\n\t\t\t\t\t\t\t<el-option v-for=\"item in options\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\r\n\t\t\t\t\t\t\t</el-option>\r\n\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t<div id=\"sexchart\" style=\"width: 600px;height: 350px;\">\r\n\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</el-tab-pane>\r\n\t\t\t\t\t<el-tab-pane label=\"民族分布\" name=\"nationcount\">\r\n\t\t\t\t\t\t<div id=\"nationchart\" style=\"width: 600px;height: 350px;\">\r\n\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</el-tab-pane>\r\n\t\t\t\t\t<el-tab-pane label=\"年级人数统计\" name=\"gradecount\">\r\n\t\t\t\t\t\t<div id=\"gradecountchart\" style=\"width: 600px;height: 350px;\">\r\n\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</el-tab-pane>\r\n\t\t\t\t\t<el-tab-pane label=\"政治面貌分布\" name=\"politicalstatus\">\r\n\t\t\t\t\t\t<div id=\"politicalstatuschart\" style=\"width: 600px;height: 350px;\">\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</el-tab-pane>\r\n\t\t\t\t</el-tabs>\r\n\t\t\t</el-main>\r\n\t\t\t<el-main class=\"chart2\">\r\n\t\t\t\t<el-tag type=\"info\" effect=\"dark\">在校教师数量</el-tag>\r\n\t\t\t\t<el-tabs v-model=\"tea_activename\">\r\n\t\t\t\t\t<el-tab-pane label=\"年级分布\" name=\"tea_grade_conunt\">\r\n\t\t\t\t\t\t<div id=\"tea_grade_chart\" style=\"width: 600px;height: 350px;\">\r\n\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</el-tab-pane>\r\n\t\t\t\t</el-tabs>\r\n\t\t\t</el-main>\r\n\t\t</el-container>\r\n\t\t<el-container>\r\n\t\t\t<el-main class=\"chart3\">\r\n\t\t\t\t<el-tag type=\"info\" effect=\"dark\">生源地图</el-tag>\r\n\t\t\t\t<div id=\"stuMap\" style=\"width: 600px;height: 350px;\"></div>\r\n\t\t\t</el-main>\r\n\t\t\t<el-main class=\"chart4\">图表2</el-main>\r\n\t\t</el-container>\r\n\t\t <el-container>\r\n\t\t\t<el-main class=\"chart5\" style=\"height: 80px;color: #000;font-weight: 800;\">\r\n\t\t\t\t统计数据均排除空白数据和无效数据\r\n\t\t\t</el-main>\r\n\t\t</el-container>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\t// 引入 ECharts 主模块\r\n\t// var echarts = require('echarts/lib/echarts');\r\n\t// require('echarts/lib/chart/bar');\r\n\t// require('echarts/lib/chart/pie');\r\n\r\n\texport default {\r\n\t\tname: \"dashboard\",\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tboardlist: [],\r\n\t\t\t\tactiveName: 'sexconunt',\r\n\t\t\t\ttea_activename: 'tea_grade_conunt',\r\n\t\t\t\tautomsgtitle: \"注意\",\r\n\t\t\t\tautomsg: \"该网站数据基于经管学院学生管理系统数据库!\\n,为非官方数据，仅作参考！\",\r\n\t\t\t\toptions: [{\r\n\t\t\t\t\tvalue: '0',\r\n\t\t\t\t\tlabel: '全学院'\r\n\t\t\t\t}],\r\n\t\t\t\tvalue: '',\r\n\t\t\t\tgradelist: ['全学院'],\r\n\t\t\t\tnationseries: [],\r\n\t\t\t\tgradeStuSeries: []\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tstuOverView(tab, event) {\r\n\t\t\t\t// console.log(tab, event);\r\n\r\n\t\t\t\tswitch (tab.name) {\r\n\t\t\t\t\tcase \"sexconunt\":\r\n\t\t\t\t\t\tthis.changeSexChart(0);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"nationcount\":\r\n\t\t\t\t\t\tthis.drawNationChart();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"gradecount\":\r\n\t\t\t\t\t\tthis.drawGradeNumChart();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"politicalstatus\":\r\n\t\t\t\t\t\tthis.drawPoliticalStatusChart();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t// console.log(tab.name);\r\n\t\t\t},\r\n\t\t\tautoopen(title1, msg) {\r\n\t\t\t\tconst h = this.$createElement;\r\n\r\n\t\t\t\tthis.$notify({\r\n\t\t\t\t\ttitle: title1,\r\n\t\t\t\t\tmessage: h('i', {\r\n\t\t\t\t\t\tstyle: 'color: red'\r\n\t\t\t\t\t}, msg)\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tchangeSexChart(year) {\r\n\t\t\t\t// console.log(year);\r\n\t\t\t\t//发送请求 \r\n\t\t\t\tthis.drawSexChart(year, this.bnum, this.gnum, 0);\r\n\t\t\t\tthis.$http.get(\"/overview/sexcount/grade/\" + year)\r\n\t\t\t\t\t.then(({\r\n\t\t\t\t\t\tdata\r\n\t\t\t\t\t}) => {\r\n\r\n\t\t\t\t\t\tthis.bnum = data.bnum;\r\n\t\t\t\t\t\tthis.gnum = data.gnum;\r\n\t\t\t\t\t\tif (year == '0') {\r\n\t\t\t\t\t\t\tyear = '全学院';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.drawSexChart(year, this.bnum, this.gnum, 1);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t\tthis.autoopen('错误', '网络错误,访问超时！');\r\n\t\t\t\t\t});\r\n\r\n\t\t\t},\r\n\t\t\t//性别图表\r\n\t\t\t/*\r\n\t\t\t\ttitle1:String 标题开头\r\n\t\t\t\tbnum:Number 男生人数\r\n\t\t\t\tgnum:Number 女生人数\r\n\t\t\t\tloading:Boolean 加载动画开关\r\n\t\t\t*/\r\n\t\t\tdrawSexChart(title1, bnum, gnum, loading) {\r\n\r\n\r\n\t\t\t\tlet myChart = this.$echarts.init(document.getElementById(\"sexchart\"));\r\n\r\n\t\t\t\t// 指定图表的配置项和数据\r\n\t\t\t\tlet option = {\r\n\t\t\t\t\ttooltip: {\r\n\t\t\t\t\t\ttrigger: 'item',\r\n\t\t\t\t\t\tformatter: '{a} <br/>{b}: {c} ({d}%)'\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttitle: {\r\n\t\t\t\t\t\ttext: title1 + '级性别比例',\r\n\t\t\t\t\t\tx: 'center'\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlegend: {\r\n\t\t\t\t\t\torient: 'vertical',\r\n\t\t\t\t\t\tleft: 10,\r\n\t\t\t\t\t\tdata: ['男', '女']\r\n\t\t\t\t\t},\r\n\t\t\t\t\tseries: [{\r\n\t\t\t\t\t\tname: title1 + '级性别比例',\r\n\t\t\t\t\t\ttype: 'pie',\r\n\t\t\t\t\t\tradius: ['50%', '70%'],\r\n\t\t\t\t\t\tavoidLabelOverlap: false,\r\n\t\t\t\t\t\tlabel: {\r\n\t\t\t\t\t\t\tnormal: {\r\n\t\t\t\t\t\t\t\tshow: false,\r\n\t\t\t\t\t\t\t\tposition: 'center'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\temphasis: {\r\n\t\t\t\t\t\t\t\tshow: true,\r\n\t\t\t\t\t\t\t\ttextStyle: {\r\n\t\t\t\t\t\t\t\t\tfontSize: '30',\r\n\t\t\t\t\t\t\t\t\tfontWeight: 'bold'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tlabelLine: {\r\n\t\t\t\t\t\t\tnormal: {\r\n\t\t\t\t\t\t\t\tshow: false\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tdata: [{\r\n\t\t\t\t\t\t\t\tvalue: bnum,\r\n\t\t\t\t\t\t\t\tname: '男'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvalue: gnum,\r\n\t\t\t\t\t\t\t\tname: '女'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}]\r\n\t\t\t\t};\r\n\t\t\t\t// 使用刚指定的配置项和数据显示图表。\r\n\t\t\t\tmyChart.setOption(option);\r\n\r\n\t\t\t\tmyChart.showLoading();\r\n\r\n\t\t\t\tif (loading) {\r\n\t\t\t\t\tmyChart.hideLoading();\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t *\t民族图表\r\n\t\t\t */\r\n\t\t\tdrawNationChart() {\r\n\t\t\t\tlet myChart = this.$echarts.init(document.getElementById(\"nationchart\"));\r\n\t\t\t\tmyChart.showLoading();\r\n\t\t\t\tthis.$http.get(\"overview/nation\")\r\n\t\t\t\t\t.then(({\r\n\t\t\t\t\t\tdata\r\n\t\t\t\t\t}) => {\r\n\t\t\t\t\t\tthis.nationseries = [];\r\n\t\t\t\t\t\tlet glists = Object.keys(data);\r\n\t\t\t\t\t\t// console.log(glists);\r\n\t\t\t\t\t\tfor (let i = 0; i < glists.length; i++) {\r\n\t\t\t\t\t\t\tlet resdata = [];\r\n\t\t\t\t\t\t\tlet nationname = Object.keys(data[glists[i]]);\r\n\t\t\t\t\t\t\tnationname.map(nname => {\r\n\t\t\t\t\t\t\t\tresdata.push({\r\n\t\t\t\t\t\t\t\t\tname: nname,\r\n\t\t\t\t\t\t\t\t\tvalue: data[glists[i]][nname]\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t// console.log(resdata);\r\n\t\t\t\t\t\t\tthis.nationseries.push({\r\n\t\t\t\t\t\t\t\tname: (glists[i] == '0' ? '全学院' : glists[i]),\r\n\t\t\t\t\t\t\t\ttype: 'treemap',\r\n\t\t\t\t\t\t\t\tbreadcrumb: {\r\n\t\t\t\t\t\t\t\t\tshow: false\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tdata: resdata\r\n\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet option = {\r\n\t\t\t\t\t\t\ttooltip: {},\r\n\t\t\t\t\t\t\ttitle: {\r\n\t\t\t\t\t\t\t\ttop: 5,\r\n\t\t\t\t\t\t\t\tleft: 'center',\r\n\t\t\t\t\t\t\t\ttext: '民族分布',\r\n\t\t\t\t\t\t\t\tborderRadius: [5, 5, 0, 0]\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tlegend: {\r\n\t\t\t\t\t\t\t\tdata: this.gradelist,\r\n\t\t\t\t\t\t\t\tselectedMode: 'single',\r\n\t\t\t\t\t\t\t\tbottom: 0,\r\n\t\t\t\t\t\t\t\titemGap: 2\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tseries: this.nationseries\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tmyChart.hideLoading();\r\n\t\t\t\t\t\tmyChart.setOption(option);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t\tthis.autoopen('错误', '网络错误,访问超时！');\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 年级人数统计图表\r\n\t\t\t */\r\n\t\t\tdrawGradeNumChart() {\r\n\t\t\t\tlet gradedata = [];\r\n\t\t\t\tlet myChart = this.$echarts.init(document.getElementById(\"gradecountchart\"));\r\n\t\t\t\tmyChart.showLoading();\r\n\t\t\t\tthis.$http.get(\"overview/grades\")\r\n\t\t\t\t\t.then(({\r\n\t\t\t\t\t\tdata\r\n\t\t\t\t\t}) => {\r\n\t\t\t\t\t\tfor (let i = 0; i < Object.keys(data).length; i++) {\r\n\t\t\t\t\t\t\tgradedata.push({\r\n\t\t\t\t\t\t\t\tname: Object.keys(data)[i],\r\n\t\t\t\t\t\t\t\tvalue: Object.values(data)[i]\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet option = {\r\n\r\n\t\t\t\t\t\t\ttooltip: {\r\n\t\t\t\t\t\t\t\ttrigger: 'item',\r\n\t\t\t\t\t\t\t\tformatter: '{a} <br/>{b} : {c} ({d}%)'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tvisualMap: {\r\n\t\t\t\t\t\t\t\tshow: false,\r\n\t\t\t\t\t\t\t\tmin: 700,\r\n\t\t\t\t\t\t\t\tmax: 900,\r\n\t\t\t\t\t\t\t\tinRange: {\r\n\t\t\t\t\t\t\t\t\tcolorLightness: [0, 1]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tseries: [{\r\n\t\t\t\t\t\t\t\tname: '年级人数统计',\r\n\t\t\t\t\t\t\t\ttype: 'pie',\r\n\t\t\t\t\t\t\t\tradius: '70%',\r\n\t\t\t\t\t\t\t\tcenter: ['50%', '50%'],\r\n\t\t\t\t\t\t\t\tdata: gradedata.sort(function(a, b) {\r\n\t\t\t\t\t\t\t\t\treturn a.value - b.value;\r\n\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\troseType: 'radius',\r\n\r\n\t\t\t\t\t\t\t}]\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tmyChart.hideLoading();\r\n\t\t\t\t\t\tmyChart.setOption(option);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t\tthis.autoopen('错误', '网络错误,访问超时！');\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 政治面貌统计\r\n\t\t\t */\r\n\t\t\tdrawPoliticalStatusChart() {\r\n\r\n\t\t\t\tlet myChart = this.$echarts.init(document.getElementById(\"politicalstatuschart\"));\r\n\t\t\t\tmyChart.showLoading();\r\n\t\t\t\tthis.$http.get(\"overview/ps\")\r\n\t\t\t\t\t.then(({\r\n\t\t\t\t\t\tdata\r\n\t\t\t\t\t}) => {\r\n\t\t\t\t\t\tlet psseries = []; //初始化图表列表\r\n\t\t\t\t\t\tlet datalist = {}; //初始化图表数据\r\n\t\t\t\t\t\tlet map = {};\r\n\t\t\t\t\t\tlet dest = [];\r\n\t\t\t\t\t\t//根据termYear,psname排序\r\n\t\t\t\t\t\tlet sortdata = data.sort(this.$sortByArr([\"termYear\", \"psname\"]));\r\n\t\t\t\t\t\t//根据termYear将json分组\r\n\t\t\t\t\t\tsortdata.forEach(i => {\r\n\t\t\t\t\t\t\tif (i.termYear == null) i.termYear = '全学院';\r\n\t\t\t\t\t\t\tif (!map[i.psname]) {\r\n\t\t\t\t\t\t\t\tdest.push({\r\n\t\t\t\t\t\t\t\t\tpsname: i.psname,\r\n\t\t\t\t\t\t\t\t\tcontent: [i]\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tmap[i.psname] = \"existed\";\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdest.forEach(j => {\r\n\t\t\t\t\t\t\t\t\tif (j.psname == i.psname) {\r\n\t\t\t\t\t\t\t\t\t\tj.content.push(i);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// console.log(map);\r\n\r\n\r\n\t\t\t\t\t\t// console.log(datalist);\r\n\t\t\t\t\t\t// console.log(dest);\r\n\r\n\t\t\t\t\t\tdest.forEach(d => {\r\n\t\t\t\t\t\t\t//初始化数据集合\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.gradelist.forEach(g => datalist[g] = 0);\r\n\r\n\t\t\t\t\t\t\td['content'].forEach(c => {\r\n\t\t\t\t\t\t\t\tdatalist[c.termYear] = (c.counts);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tpsseries.push({\r\n\t\t\t\t\t\t\t\tname: d.psname,\r\n\t\t\t\t\t\t\t\ttype: 'bar',\r\n\t\t\t\t\t\t\t\tstack: '总量',\r\n\t\t\t\t\t\t\t\tlabel: {\r\n\t\t\t\t\t\t\t\t\tshow: false,\r\n\t\t\t\t\t\t\t\t\tposition: 'insideRight'\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tdata: Object.values(datalist)\r\n\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tlet option = {\r\n\t\t\t\t\t\t\ttooltip: {\r\n\t\t\t\t\t\t\t\ttrigger: 'axis',\r\n\t\t\t\t\t\t\t\taxisPointer: {\r\n\t\t\t\t\t\t\t\t\ttype: 'shadow'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tlegend: {\r\n\t\t\t\t\t\t\t\tdata: ['党员', '共青团员', '积极分子', '群众', '预备党员']\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tgrid: {\r\n\t\t\t\t\t\t\t\tleft: '3%',\r\n\t\t\t\t\t\t\t\tright: '4%',\r\n\t\t\t\t\t\t\t\tbottom: '3%',\r\n\t\t\t\t\t\t\t\tcontainLabel: true\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\txAxis: {\r\n\t\t\t\t\t\t\t\ttype: 'value'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tyAxis: {\r\n\t\t\t\t\t\t\t\ttype: 'category',\r\n\t\t\t\t\t\t\t\tdata: Object.keys(datalist)\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tseries: psseries\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tmyChart.hideLoading();\r\n\t\t\t\t\t\tmyChart.setOption(option);\r\n\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t\tthis.autoopen('错误', '网络错误,访问超时！');\r\n\t\t\t\t\t});\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 教师年级分布  //TODO 无数据，静态数据演示图\r\n\t\t\t */\r\n\t\t\tdrawTeacherGradeChart() {\r\n\t\t\t\tlet myChart = this.$echarts.init(document.getElementById(\"tea_grade_chart\"));\r\n\t\t\t\tlet option = {\r\n\t\t\t\t\ttooltip: {\r\n\t\t\t\t\t\ttrigger: 'item',\r\n\t\t\t\t\t\tformatter: '{a} <br/>{b} : {c} ({d}%)'\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttitle: {\r\n\t\t\t\t\t\ttext: \"在库教师数量(数据库暂无教师数据，下图为演示数据)\",\r\n\t\t\t\t\t\tleft: \"center\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlegend: {\r\n\t\t\t\t\t\ttype: 'scroll',\r\n\t\t\t\t\t\torient: 'vertical',\r\n\t\t\t\t\t\tright: 10,\r\n\t\t\t\t\t\ttop: 20,\r\n\t\t\t\t\t\tbottom: 20,\r\n\t\t\t\t\t\tdata: ['2014', '2015', '2016', '2017', '2018']\r\n\t\t\t\t\t},\r\n\t\t\t\t\tseries: [{\r\n\t\t\t\t\t\tname: '在校教师数量(暂无数据，图为演示数据)',\r\n\t\t\t\t\t\ttype: 'pie',\r\n\t\t\t\t\t\tradius: '70%',\r\n\t\t\t\t\t\tcenter: ['40%', '50%'],\r\n\t\t\t\t\t\tdata: [{\r\n\t\t\t\t\t\t\t\tvalue: 30,\r\n\t\t\t\t\t\t\t\tname: '2014'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvalue: 40,\r\n\t\t\t\t\t\t\t\tname: '2015'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvalue: 50,\r\n\t\t\t\t\t\t\t\tname: '2016'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvalue: 60,\r\n\t\t\t\t\t\t\t\tname: '2017'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvalue: 70,\r\n\t\t\t\t\t\t\t\tname: '2018'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\temphasis: {\r\n\t\t\t\t\t\t\titemStyle: {\r\n\t\t\t\t\t\t\t\tshadowBlur: 10,\r\n\t\t\t\t\t\t\t\tshadowOffsetX: 0,\r\n\t\t\t\t\t\t\t\tshadowColor: 'rgba(0, 0, 0, 0.5)'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}]\r\n\t\t\t\t};\r\n\t\t\t\tmyChart.setOption(option);\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * \t生源地图\r\n\t\t\t */\r\n\t\t\tdramStuMap() {\r\n\t\t\t\tlet myChart = this.$echarts.init(document.getElementById(\"stuMap\"));\r\n\t\t\t\tmyChart.showLoading();\r\n\t\t\t\tthis.$http.get(\"overview/stumap\")\r\n\t\t\t\t\t.then(({\r\n\t\t\t\t\t\tdata\r\n\t\t\t\t\t}) => {\r\n\t\t\t\t\t\tlet addrData = this.$evil(data);\r\n\r\n\t\t\t\t\t\tlet option = {\r\n\t\t\t\t\t\t\ttooltip: {\r\n\t\t\t\t\t\t\t\ttrigger: 'item'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tlegend: {\r\n\t\t\t\t\t\t\t\torient: 'vertical',\r\n\t\t\t\t\t\t\t\tleft: 'left',\r\n\t\t\t\t\t\t\t\tdata: ['全学院']\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tvisualMap: {\r\n\t\t\t\t\t\t\t      // 左下角定义 在选中范围中的视觉元素 渐变地区颜色\r\n\t\t\t\t\t\t\t      type: 'piecewise', // 类型为分段型\r\n\t\t\t\t\t\t\t      top: \"bottom\",\r\n\t\t\t\t\t\t\t      right: 10,\r\n\t\t\t\t\t\t\t      splitNumber: 6,\r\n\t\t\t\t\t\t\t      seriesIndex: [0],\r\n\t\t\t\t\t\t\t      itemWidth: 20, // 每个图元的宽度\r\n\t\t\t\t\t\t\t      itemGap: 2,    // 每两个图元之间的间隔距离，单位为px\r\n\t\t\t\t\t\t\t      pieces: [      // 自定义每一段的范围，以及每一段的文字   \r\n\t\t\t\t\t\t\t        { gte: 1000, label: '1000以上人', color: '#c1484e' },\r\n\t\t\t\t\t\t\t        { gte: 500, lte: 999, label: '500-999人', color: '#cb625f' },\r\n\t\t\t\t\t\t\t        { gte: 100, lte: 499, label: '100-499人', color: '#d57b6e' },\r\n\t\t\t\t\t\t\t        { gte: 10, lte: 99, label: '10-99人', color: '#df9a7e' },\r\n\t\t\t\t\t\t\t        { lte: 9, label: '1-9人', color: '#f5eda5' }          // 不指定 min，表示 min 为无限大（-Infinity）。\r\n\t\t\t\t\t\t\t      ],\r\n\t\t\t\t\t\t\t      textStyle: {\r\n\t\t\t\t\t\t\t        color: '#737373'\r\n\t\t\t\t\t\t\t      }\r\n\t\t\t\t\t\t\t    },\r\n\t\t\t\t\t\t\ttoolbox: {\r\n\t\t\t\t\t\t\t\tshow: true,\r\n\t\t\t\t\t\t\t\torient: 'vertical',\r\n\t\t\t\t\t\t\t\tleft: 'right',\r\n\t\t\t\t\t\t\t\ttop: 'center',\r\n\t\t\t\t\t\t\t\tfeature: {\r\n\t\t\t\t\t\t\t\t\tmark: {\r\n\t\t\t\t\t\t\t\t\t\tshow: true\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tdataView: {\r\n\t\t\t\t\t\t\t\t\t\tshow: true,\r\n\t\t\t\t\t\t\t\t\t\treadOnly: false\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\trestore: {\r\n\t\t\t\t\t\t\t\t\t\tshow: true\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tsaveAsImage: {\r\n\t\t\t\t\t\t\t\t\t\tshow: true\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tseries: [{\r\n\t\t\t\t\t\t\t\tname: '全学院',\r\n\t\t\t\t\t\t\t\ttype: 'map',\r\n\t\t\t\t\t\t\t\tmapType: 'china',\r\n\t\t\t\t\t\t\t\troam: false,\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tzoom: 1.2,\r\n\t\t\t\t\t\t\t\tlabel: {\r\n\t\t\t\t\t\t\t\t\tnormal: {\r\n\t\t\t\t\t\t\t\t\t\tshow: true\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\temphasis: {\r\n\t\t\t\t\t\t\t\t\t\tshow: false\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tdata: addrData\r\n\t\t\t\t\t\t\t}]\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tmyChart.hideLoading();\r\n\t\t\t\t\t\tmyChart.setOption(option);\r\n\t\t\t\t\t})\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\r\n\t\t\t//提示信息\r\n\t\t\tthis.autoopen(this.automsgtitle, this.automsg);\r\n\t\t\t//数据面板显示\r\n\t\t\tthis.$http.get(\"/overview/showBoard\")\r\n\t\t\t\t.then(({\r\n\t\t\t\t\tdata\r\n\t\t\t\t}) => {\r\n\t\t\t\t\tthis.boardlist = data;\r\n\t\t\t\t\tconsole.log(this.boardlist);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\tthis.autoopen('错误', '网络错误,访问超时！');\r\n\t\t\t\t});\r\n\t\t\t//性别图表显示\r\n\t\t\tthis.changeSexChart('0');\r\n\t\t\t//获取年级列表\r\n\t\t\tthis.$http.get(\"/overview/listGrades\")\r\n\t\t\t\t.then(({\r\n\t\t\t\t\tdata\r\n\t\t\t\t}) => {\r\n\t\t\t\t\tthis.gradelist.push.apply(this.gradelist, data);\r\n\t\t\t\t\tdata.map(grade => {\r\n\t\t\t\t\t\tthis.options.push({\r\n\t\t\t\t\t\t\t'value': grade,\r\n\t\t\t\t\t\t\t'label': grade\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\tthis.autoopen('错误', '网络错误,访问超时！');\r\n\t\t\t\t});\r\n\r\n\t\t\t//教师分布图\r\n\t\t\tthis.drawTeacherGradeChart();\r\n\t\t\t//生源地图\r\n\t\t\tthis.dramStuMap();\r\n\r\n\t\t}\r\n\r\n\r\n\t}\r\n</script>\r\n\r\n<style scoped=\"scoped\">\r\n\t.num,\r\n\t.el-main {\r\n\t\tmargin: 10px;\r\n\t\tbackground-color: #E9EEF3;\r\n\t\tcolor: #333;\r\n\t\ttext-align: center;\r\n\t\theight: 500px;\r\n\t\twidth: 500px;\r\n\t}\r\n\r\n\t.num {\r\n\t\theight: 400px;\r\n\r\n\t}\r\n\r\n\t.num div {\r\n\r\n\t\theight: 165px;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.num div p {\r\n\t\tfont-size: 30px;\r\n\t}\r\n\r\n\t.num div p>span {\r\n\t\tfont-size: 50%;\r\n\t}\r\n\r\n\t.el-tag {\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.el-select {\r\n\t\tfloat: right;\r\n\t\tz-index: 10;\r\n\t}\r\n</style>\n"]}]}